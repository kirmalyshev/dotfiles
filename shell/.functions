#!/usr/bin/env zsh

# `.functions` provides helper functions for shell.


# === Commonly used functions ===

pyclean () {
  # Cleans py[cod] and cache dirs in the current tree:
  fd -I -H \
    '(__pycache__|\.(pytest_|mypy_)?cache|\.hypothesis\.py[cod]$)' \
  | xargs rm -rf
}


mcdir () {
  if [ $# -ne 1 ]; then
    echo 'usage: mcdir <dir-name>'
    return 137
  fi
  # Create a new directory and enter it
  local dir_name="$1"
  mkdir -p "$dir_name" && cd "$dir_name"
}


# === Agents ===
_claude_with_profile () {
  export CLAUDE_CONFIG_DIR="$1"
  command claude "${@:2}"
}

# Claude personal
function claude-personal() {
  _claude_with_profile "$HOME/.claude-personal" "$@"
}

# Claude work
function claude-work() {
  _claude_with_profile "$HOME/.claude-work" "$@"
}

# Claude sandbox
function claude-sandbox() {
  _claude_with_profile "$HOME/.claude-sandbox" "$@"
}
